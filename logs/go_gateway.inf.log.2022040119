[INFO][2022-04-01T19:34:53.426][log.go:44] _com_request_in||spanid=684ce9ac78629a0f||method=POST||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"213.43.45.2:731\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/dd\",\n  \"rule_type\": 1,\n  \"service_desc\": \"12\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"zhjwdzc\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||from=127.0.0.1||traceid=0a0a0af16246e35d3b100898658221b0||cspanid=||uri=/service/service_add_http||args=map[]
[INFO][2022-04-01T19:34:53.426][log.go:44] _com_mysql_success||rows=0||traceid=0a0a0af16246e35d3b100898658221b0||cspanid=||spanid=684ce9ac78629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:94||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'zhjwdzc'||proc_time=1||current_time=2022-04-01 19:34:53
[INFO][2022-04-01T19:34:53.426][log.go:44] _com_request_out||spanid=684ce9ac78629a0f||uri=/service/service_add_http||args=map[]||from=127.0.0.1||response={\"errno\":2002,\"errmsg\":\"服务已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e35d3b100898658221b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:214\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||proc_time=0.004192528||traceid=0a0a0af16246e35d3b100898658221b0||cspanid=||method=POST
[INFO][2022-04-01T19:37:19.104][log.go:44] _com_request_in||from=127.0.0.1||traceid=0a0a0af16246e3efe7f008be658221b0||spanid=684ce91e78629a0f||uri=/service/service_add_http||method=POST||cspanid=||args=map[]||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"213.43.45.2:731\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/dd\",\n  \"rule_type\": 1,\n  \"service_desc\": \"12\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"zhjwdzc\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}
[INFO][2022-04-01T19:37:19.104][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'zhjwdzc' ORDER BY `gateway_service_info`.`id` LIMIT 1||proc_time=1||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:94||rows=0||current_time=2022-04-01 19:37:19||traceid=0a0a0af16246e3efe7f008be658221b0||spanid=684ce91e78629a0f
[INFO][2022-04-01T19:37:19.104][log.go:44] _com_mysql_success||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`rule_type` = 1 AND `gateway_service_http_rule`.`rule` = '/ada/dd'||rows=0||proc_time=0||current_time=2022-04-01 19:37:19||traceid=0a0a0af16246e3efe7f008be658221b0||spanid=684ce91e78629a0f
[INFO][2022-04-01T19:37:19.104][log.go:44] _com_request_out||traceid=0a0a0af16246e3efe7f008be658221b0||spanid=684ce91e78629a0f||uri=/service/service_add_http||args=map[]||response={\"errno\":2003,\"errmsg\":\"服务接入前缀或域名已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e3efe7f008be658221b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:221\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||method=POST||from=127.0.0.1||proc_time=0.005304521||cspanid=
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_request_in||spanid=684cee2c380704bb||method=GET||from=127.0.0.1||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||uri=/service/service_list?page_size=20&page_no=1||args=map[]||body=
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_info` WHERE is_delete=0 ORDER BY id desc LIMIT 20||rows=4||current_time=2022-04-01 19:41:17||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:81||proc_time=2||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||spanid=684cee2c380704bb
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||proc_time=0||traceid=0a0a0af16246e4dd71c808be104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:86||sql=SELECT count(*) FROM `gateway_service_info` WHERE is_delete=0 LIMIT 20||rows=1||current_time=2022-04-01 19:41:17||cspanid=||spanid=684cee2c380704bb
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||cspanid=||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 59||rows=1||traceid=0a0a0af16246e4dd71c808be104dc7b0||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||proc_time=0||current_time=2022-04-01 19:41:17
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||rows=0||current_time=2022-04-01 19:41:17||spanid=684cee2c380704bb||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 59||proc_time=0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||rows=0||proc_time=0||current_time=2022-04-01 19:41:17||cspanid=||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 59||traceid=0a0a0af16246e4dd71c808be104dc7b0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||cspanid=||spanid=684cee2c380704bb||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 59||proc_time=0||current_time=2022-04-01 19:41:17||traceid=0a0a0af16246e4dd71c808be104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||rows=1
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||traceid=0a0a0af16246e4dd71c808be104dc7b0||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 59||rows=1||proc_time=0||current_time=2022-04-01 19:41:17||cspanid=
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||cspanid=||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 58||proc_time=0||current_time=2022-04-01 19:41:17||traceid=0a0a0af16246e4dd71c808be104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||rows=0||spanid=684cee2c380704bb
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 58||rows=0||proc_time=0||current_time=2022-04-01 19:41:17||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||cspanid=||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 58||rows=1||proc_time=0||traceid=0a0a0af16246e4dd71c808be104dc7b0||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||current_time=2022-04-01 19:41:17
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 58||rows=1||current_time=2022-04-01 19:41:17||cspanid=||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||proc_time=0||traceid=0a0a0af16246e4dd71c808be104dc7b0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||rows=1||proc_time=0||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 58||current_time=2022-04-01 19:41:17
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||rows=0||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 57||proc_time=0||current_time=2022-04-01 19:41:17||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 57||current_time=2022-04-01 19:41:17||cspanid=||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||rows=1||proc_time=0||traceid=0a0a0af16246e4dd71c808be104dc7b0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||proc_time=0||current_time=2022-04-01 19:41:17||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 57||rows=0||spanid=684cee2c380704bb
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 57||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||spanid=684cee2c380704bb||rows=1||proc_time=0||current_time=2022-04-01 19:41:17
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 57||proc_time=0||current_time=2022-04-01 19:41:17||cspanid=||spanid=684cee2c380704bb||rows=1||traceid=0a0a0af16246e4dd71c808be104dc7b0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 56||rows=1||cspanid=||spanid=684cee2c380704bb||proc_time=0||current_time=2022-04-01 19:41:17||traceid=0a0a0af16246e4dd71c808be104dc7b0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 56||rows=0||traceid=0a0a0af16246e4dd71c808be104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||proc_time=0||current_time=2022-04-01 19:41:17||cspanid=||spanid=684cee2c380704bb
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 56||rows=0||proc_time=0||cspanid=||spanid=684cee2c380704bb||current_time=2022-04-01 19:41:17||traceid=0a0a0af16246e4dd71c808be104dc7b0
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 56||proc_time=0||current_time=2022-04-01 19:41:17||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||spanid=684cee2c380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||rows=1
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_mysql_success||spanid=684cee2c380704bb||proc_time=0||traceid=0a0a0af16246e4dd71c808be104dc7b0||rows=1||current_time=2022-04-01 19:41:17||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 56
[INFO][2022-04-01T19:41:17.031][log.go:44] _com_request_out||response={\"errno\":0,\"errmsg\":\"\",\"data\":{\"total\":4,\"list\":[{\"id\":59,\"service_name\":\"test.com:8080\",\"service_desc\":\"测试域名接入\",\"load_type\":0,\"service_addr\":\"test.com\",\"qps\":0,\"qpd\":0,\"total_node\":2},{\"id\":58,\"service_name\":\"test_grpc_service\",\"service_desc\":\"测试GRPC服务\",\"load_type\":2,\"service_addr\":\"10.10.10.198:8012\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":57,\"service_name\":\"test_tcp_service\",\"service_desc\":\"测试TCP代理\",\"load_type\":1,\"service_addr\":\"10.10.10.198:8011\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":56,\"service_name\":\"test_http_service\",\"service_desc\":\"测试HTTP代理\",\"load_type\":0,\"service_addr\":\"10.10.10.198:4433/test_http_service\",\"qps\":0,\"qpd\":0,\"total_node\":2}]},\"trace_id\":\"0a0a0af16246e4dd71c808be104dc7b0\",\"stack\":null}||spanid=684cee2c380704bb||traceid=0a0a0af16246e4dd71c808be104dc7b0||cspanid=||uri=/service/service_list?page_size=20&page_no=1||method=GET||args=map[]||from=127.0.0.1||proc_time=0.018928978
[INFO][2022-04-01T19:41:30.976][log.go:44] _com_request_in||uri=/service/service_delete?id=59||method=GET||cspanid=||spanid=684cee1b57e9d186||args=map[]||body=||from=127.0.0.1||traceid=0a0a0af16246e4ea1af808be5a8581b0
[INFO][2022-04-01T19:41:30.976][log.go:44] _com_mysql_success||rows=1||current_time=2022-04-01 19:41:30||traceid=0a0a0af16246e4ea1af808be5a8581b0||cspanid=||spanid=684cee1b57e9d186||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:94||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`id` = 59 ORDER BY `gateway_service_info`.`id` LIMIT 1||proc_time=0
[INFO][2022-04-01T19:41:31.107][log.go:44] _com_mysql_success||current_time=2022-04-01 19:41:30||traceid=0a0a0af16246e4ea1af808be5a8581b0||cspanid=||spanid=684cee1b57e9d186||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:103||rows=1||proc_time=128||sql=UPDATE `gateway_service_info` SET `load_type`=0,`service_name`='test.com:8080',`service_desc`='测试域名接入',`create_at`='2022-04-01 19:41:30.98',`update_at`='2020-04-18 20:29:13',`is_delete`=1 WHERE `id` = 59
[INFO][2022-04-01T19:41:31.107][log.go:44] _com_request_out||args=map[]||from=127.0.0.1||cspanid=||spanid=684cee1b57e9d186||uri=/service/service_delete?id=59||method=GET||response={\"errno\":0,\"errmsg\":\"\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e4ea1af808be5a8581b0\",\"stack\":null}||proc_time=0.130739353||traceid=0a0a0af16246e4ea1af808be5a8581b0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_request_in||spanid=684cee1e1408d2ac||uri=/service/service_list?page_size=20&page_no=1||method=GET||args=map[]||body=||from=127.0.0.1||cspanid=||traceid=0a0a0af16246e4ef79c808be66cb39b0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:81||rows=3||cspanid=||spanid=684cee1e1408d2ac||sql=SELECT * FROM `gateway_service_info` WHERE is_delete=0 ORDER BY id desc LIMIT 20||proc_time=0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||traceid=0a0a0af16246e4ef79c808be66cb39b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:86||sql=SELECT count(*) FROM `gateway_service_info` WHERE is_delete=0 LIMIT 20||cspanid=||spanid=684cee1e1408d2ac||rows=1||proc_time=0||current_time=2022-04-01 19:41:35
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0||spanid=684cee1e1408d2ac||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 58||rows=0||proc_time=0||cspanid=
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 58||cspanid=||traceid=0a0a0af16246e4ef79c808be66cb39b0||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||rows=0||proc_time=0||current_time=2022-04-01 19:41:35
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||proc_time=0||current_time=2022-04-01 19:41:35||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 58||cspanid=||spanid=684cee1e1408d2ac||rows=1||traceid=0a0a0af16246e4ef79c808be66cb39b0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||rows=1||proc_time=0||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 58||current_time=2022-04-01 19:41:35
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 58||rows=1||proc_time=0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||proc_time=0||traceid=0a0a0af16246e4ef79c808be66cb39b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 57||rows=0||current_time=2022-04-01 19:41:35||cspanid=||spanid=684cee1e1408d2ac
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||proc_time=0||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=||rows=1||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 57||current_time=2022-04-01 19:41:35||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 57||proc_time=0||current_time=2022-04-01 19:41:35||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||rows=0||traceid=0a0a0af16246e4ef79c808be66cb39b0||spanid=684cee1e1408d2ac
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||rows=1||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||proc_time=0||current_time=2022-04-01 19:41:35||spanid=684cee1e1408d2ac||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 57
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 57||cspanid=||spanid=684cee1e1408d2ac||rows=1||proc_time=0||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 56||proc_time=0||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||rows=1||cspanid=
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 56||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||rows=0||proc_time=0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 56||rows=0||cspanid=||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||proc_time=0||current_time=2022-04-01 19:41:35||traceid=0a0a0af16246e4ef79c808be66cb39b0
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||traceid=0a0a0af16246e4ef79c808be66cb39b0||spanid=684cee1e1408d2ac||current_time=2022-04-01 19:41:35||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 56||rows=1||proc_time=0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 56||rows=1||current_time=2022-04-01 19:41:35||spanid=684cee1e1408d2ac||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||proc_time=0||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=
[INFO][2022-04-01T19:41:35.280][log.go:44] _com_request_out||traceid=0a0a0af16246e4ef79c808be66cb39b0||cspanid=||uri=/service/service_list?page_size=20&page_no=1||method=GET||args=map[]||from=127.0.0.1||response={\"errno\":0,\"errmsg\":\"\",\"data\":{\"total\":3,\"list\":[{\"id\":58,\"service_name\":\"test_grpc_service\",\"service_desc\":\"测试GRPC服务\",\"load_type\":2,\"service_addr\":\"10.10.10.198:8012\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":57,\"service_name\":\"test_tcp_service\",\"service_desc\":\"测试TCP代理\",\"load_type\":1,\"service_addr\":\"10.10.10.198:8011\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":56,\"service_name\":\"test_http_service\",\"service_desc\":\"测试HTTP代理\",\"load_type\":0,\"service_addr\":\"10.10.10.198:4433/test_http_service\",\"qps\":0,\"qpd\":0,\"total_node\":2}]},\"trace_id\":\"0a0a0af16246e4ef79c808be66cb39b0\",\"stack\":null}||proc_time=0.01627159||spanid=684cee1e1408d2ac
[INFO][2022-04-01T19:44:21.032][log.go:44] _com_request_in||spanid=684cef6478629a0f||args=map[]||from=127.0.0.1||traceid=0a0a0af16246e595daf808f1658221b0||cspanid=||uri=/service/service_add_http||method=POST||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"zhjwbgz\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}
[INFO][2022-04-01T19:44:21.032][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'zhjwbgz' ORDER BY `gateway_service_info`.`id` LIMIT 1||rows=0||cspanid=||spanid=684cef6478629a0f||traceid=0a0a0af16246e595daf808f1658221b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||proc_time=1||current_time=2022-04-01 19:44:21
[INFO][2022-04-01T19:44:21.032][log.go:44] _com_mysql_success||cspanid=||spanid=684cef6478629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||rows=0||proc_time=0||current_time=2022-04-01 19:44:21||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`rule_type` = 1 AND `gateway_service_http_rule`.`rule` = '/ada/d'||traceid=0a0a0af16246e595daf808f1658221b0
[INFO][2022-04-01T19:44:21.032][log.go:44] _com_request_out||method=POST||args=map[]||response={\"errno\":2003,\"errmsg\":\"服务接入前缀或域名已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e595daf808f1658221b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:221\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||uri=/service/service_add_http||proc_time=0.005567632||traceid=0a0a0af16246e595daf808f1658221b0||cspanid=||spanid=684cef6478629a0f||from=127.0.0.1
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_request_in||method=GET||body=||from=127.0.0.1||spanid=684cece7380704bb||uri=/service/service_list?page_size=20&page_no=1||args=map[]||traceid=0a0a0af16246e61685a008f1104dc7b0||cspanid=
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_info` WHERE is_delete=0 ORDER BY id desc LIMIT 20||rows=3||proc_time=3||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:82||current_time=2022-04-01 19:46:30||traceid=0a0a0af16246e61685a008f1104dc7b0||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||sql=SELECT count(*) FROM `gateway_service_info` WHERE is_delete=0 LIMIT 20||rows=1||traceid=0a0a0af16246e61685a008f1104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:87||proc_time=0||current_time=2022-04-01 19:46:30||cspanid=||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 58||rows=0||traceid=0a0a0af16246e61685a008f1104dc7b0||cspanid=||spanid=684cece7380704bb||proc_time=0||current_time=2022-04-01 19:46:30
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 58||current_time=2022-04-01 19:46:30||traceid=0a0a0af16246e61685a008f1104dc7b0||cspanid=||rows=0||proc_time=0
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||current_time=2022-04-01 19:46:30||spanid=684cece7380704bb||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 58||rows=1||proc_time=0||traceid=0a0a0af16246e61685a008f1104dc7b0
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||proc_time=0||traceid=0a0a0af16246e61685a008f1104dc7b0||cspanid=||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 58||rows=1||current_time=2022-04-01 19:46:30
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||traceid=0a0a0af16246e61685a008f1104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 58||rows=1||current_time=2022-04-01 19:46:30||proc_time=0||cspanid=||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||proc_time=0||traceid=0a0a0af16246e61685a008f1104dc7b0||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 57||rows=0||current_time=2022-04-01 19:46:30||cspanid=
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 57||traceid=0a0a0af16246e61685a008f1104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||rows=1||proc_time=0||current_time=2022-04-01 19:46:30||cspanid=||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 57||current_time=2022-04-01 19:46:30||traceid=0a0a0af16246e61685a008f1104dc7b0||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||rows=0||proc_time=0||cspanid=
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||current_time=2022-04-01 19:46:30||cspanid=||proc_time=0||traceid=0a0a0af16246e61685a008f1104dc7b0||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 57||rows=1
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||traceid=0a0a0af16246e61685a008f1104dc7b0||cspanid=||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 57||rows=1||proc_time=0||current_time=2022-04-01 19:46:30
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||rows=1||proc_time=0||traceid=0a0a0af16246e61685a008f1104dc7b0||cspanid=||spanid=684cece7380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 56||current_time=2022-04-01 19:46:30
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 56||rows=0||traceid=0a0a0af16246e61685a008f1104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||proc_time=0||current_time=2022-04-01 19:46:30||cspanid=||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 56||proc_time=0||current_time=2022-04-01 19:46:30||traceid=0a0a0af16246e61685a008f1104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||rows=0||cspanid=||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 56||rows=1||traceid=0a0a0af16246e61685a008f1104dc7b0||spanid=684cece7380704bb||proc_time=0||current_time=2022-04-01 19:46:30||cspanid=
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||current_time=2022-04-01 19:46:30||cspanid=||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 56||rows=1||proc_time=0||traceid=0a0a0af16246e61685a008f1104dc7b0||spanid=684cece7380704bb
[INFO][2022-04-01T19:46:30.693][log.go:44] _com_request_out||cspanid=||spanid=684cece7380704bb||uri=/service/service_list?page_size=20&page_no=1||response={\"errno\":0,\"errmsg\":\"\",\"data\":{\"total\":3,\"list\":[{\"id\":58,\"service_name\":\"test_grpc_service\",\"service_desc\":\"测试GRPC服务\",\"load_type\":2,\"service_addr\":\"10.10.10.198:8012\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":57,\"service_name\":\"test_tcp_service\",\"service_desc\":\"测试TCP代理\",\"load_type\":1,\"service_addr\":\"10.10.10.198:8011\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":56,\"service_name\":\"test_http_service\",\"service_desc\":\"测试HTTP代理\",\"load_type\":0,\"service_addr\":\"10.10.10.198:4433/test_http_service\",\"qps\":0,\"qpd\":0,\"total_node\":2}]},\"trace_id\":\"0a0a0af16246e61685a008f1104dc7b0\",\"stack\":null}||proc_time=0.016071545||traceid=0a0a0af16246e61685a008f1104dc7b0||method=GET||args=map[]||from=127.0.0.1
[INFO][2022-04-01T19:47:18.541][log.go:44] _com_request_in||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"test_grpc_service\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||cspanid=||spanid=684cecb757e9d186||uri=/service/service_add_http||method=POST||args=map[]||from=127.0.0.1||traceid=0a0a0af16246e646bb8008f15a8581b0
[INFO][2022-04-01T19:47:18.541][log.go:44] _com_mysql_success||cspanid=||spanid=684cecb757e9d186||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'test_grpc_service' ORDER BY `gateway_service_info`.`id` LIMIT 1||proc_time=1||traceid=0a0a0af16246e646bb8008f15a8581b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||rows=1||current_time=2022-04-01 19:47:18
[INFO][2022-04-01T19:47:18.541][log.go:44] _com_request_out||args=map[]||from=127.0.0.1||proc_time=0.003045231||traceid=0a0a0af16246e646bb8008f15a8581b0||uri=/service/service_add_http||method=POST||response={\"errno\":2002,\"errmsg\":\"服务已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e646bb8008f15a8581b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:214\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||cspanid=||spanid=684cecb757e9d186
[INFO][2022-04-01T19:47:39.504][log.go:44] _com_request_in||uri=/service/service_add_http||args=map[]||from=127.0.0.1||traceid=0a0a0af16246e65b206008f166cb39b0||method=POST||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"test_http_service\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||cspanid=||spanid=684cecaa1408d2ac
[INFO][2022-04-01T19:47:39.504][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||proc_time=0||current_time=2022-04-01 19:47:39||spanid=684cecaa1408d2ac||cspanid=||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'test_http_service' ORDER BY `gateway_service_info`.`id` LIMIT 1||rows=1||traceid=0a0a0af16246e65b206008f166cb39b0
[INFO][2022-04-01T19:47:39.504][log.go:44] _com_request_out||method=POST||args=map[]||from=127.0.0.1||response={\"errno\":2002,\"errmsg\":\"服务已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e65b206008f166cb39b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:214\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||traceid=0a0a0af16246e65b206008f166cb39b0||spanid=684cecaa1408d2ac||uri=/service/service_add_http||cspanid=||proc_time=0.002540006
[INFO][2022-04-01T19:48:09.665][log.go:44] _com_request_in||uri=/service/service_add_http||args=map[]||from=127.0.0.1||traceid=0a0a0af16246e67957180912658221b0||cspanid=||method=POST||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"fdahjzg\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||spanid=684cec8878629a0f
[INFO][2022-04-01T19:48:09.665][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'fdahjzg'||rows=0||traceid=0a0a0af16246e67957180912658221b0||cspanid=||proc_time=1||current_time=2022-04-01 19:48:09||spanid=684cec8878629a0f
[INFO][2022-04-01T19:48:09.665][log.go:44] _com_request_out||proc_time=0.003929022||traceid=0a0a0af16246e67957180912658221b0||method=POST||args=map[]||from=127.0.0.1||spanid=684cec8878629a0f||uri=/service/service_add_http||response={\"errno\":2002,\"errmsg\":\"服务已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e67957180912658221b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:214\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||cspanid=
[INFO][2022-04-01T19:48:55.901][log.go:44] _com_request_in||from=127.0.0.1||traceid=0a0a0af16246e6a761f80934658221b0||cspanid=||spanid=684cec5678629a0f||args=map[]||method=GET||body=||uri=/service/service_delete?id=59
[INFO][2022-04-01T19:48:55.901][log.go:44] _com_mysql_success||cspanid=||spanid=684cec5678629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`id` = 59||proc_time=1||rows=1||current_time=2022-04-01 19:48:55||traceid=0a0a0af16246e6a761f80934658221b0
[INFO][2022-04-01T19:48:56.002][log.go:44] _com_mysql_success||sql=UPDATE `gateway_service_info` SET `load_type`=0,`service_name`='test.com:8080',`service_desc`='测试域名接入',`create_at`='2022-04-01 19:48:55.905',`update_at`='2020-04-18 20:29:13',`is_delete`=1 WHERE `id` = 59||current_time=2022-04-01 19:48:55||traceid=0a0a0af16246e6a761f80934658221b0||cspanid=||spanid=684cec5678629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:106||rows=1||proc_time=97
[INFO][2022-04-01T19:48:56.002][log.go:44] _com_request_out||response={\"errno\":0,\"errmsg\":\"\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e6a761f80934658221b0\",\"stack\":null}||traceid=0a0a0af16246e6a761f80934658221b0||uri=/service/service_delete?id=59||method=GET||proc_time=0.101522905||cspanid=||spanid=684cec5678629a0f||args=map[]||from=127.0.0.1
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_request_in||cspanid=||spanid=684cec5d380704bb||body=||from=127.0.0.1||traceid=0a0a0af16246e6acf3800934104dc7b0||uri=/service/service_list?page_size=20&page_no=1||method=GET||args=map[]
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||proc_time=0||cspanid=||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:82||sql=SELECT * FROM `gateway_service_info` WHERE is_delete=0 ORDER BY id desc LIMIT 20||traceid=0a0a0af16246e6acf3800934104dc7b0||rows=3||current_time=2022-04-01 19:49:00
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:87||sql=SELECT count(*) FROM `gateway_service_info` WHERE is_delete=0 LIMIT 20||rows=1||cspanid=||proc_time=0||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0||spanid=684cec5d380704bb
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 58||rows=0||proc_time=0||cspanid=||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 58||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||rows=0||proc_time=0
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 58||current_time=2022-04-01 19:49:00||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||rows=1||proc_time=0||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||spanid=684cec5d380704bb||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 58||rows=1||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||proc_time=0||current_time=2022-04-01 19:49:00
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||cspanid=||spanid=684cec5d380704bb||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 58||proc_time=0||current_time=2022-04-01 19:49:00||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||rows=1||traceid=0a0a0af16246e6acf3800934104dc7b0
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||proc_time=0||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 57||rows=0||spanid=684cec5d380704bb
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||rows=1||current_time=2022-04-01 19:49:00||cspanid=||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 57||proc_time=0||traceid=0a0a0af16246e6acf3800934104dc7b0||spanid=684cec5d380704bb
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 57||rows=0||proc_time=0||current_time=2022-04-01 19:49:00||cspanid=||spanid=684cec5d380704bb||traceid=0a0a0af16246e6acf3800934104dc7b0
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||spanid=684cec5d380704bb||proc_time=0||current_time=2022-04-01 19:49:00||rows=1||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 57
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=||proc_time=0||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 57||rows=1||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||spanid=684cec5d380704bb||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 56||proc_time=0||current_time=2022-04-01 19:49:00||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||rows=1||traceid=0a0a0af16246e6acf3800934104dc7b0
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||proc_time=0||cspanid=||spanid=684cec5d380704bb||rows=0||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 56||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||cspanid=||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 56||proc_time=0||current_time=2022-04-01 19:49:00||traceid=0a0a0af16246e6acf3800934104dc7b0||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||rows=0
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||spanid=684cec5d380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||rows=1||traceid=0a0a0af16246e6acf3800934104dc7b0||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 56||proc_time=0||current_time=2022-04-01 19:49:00||cspanid=
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_mysql_success||traceid=0a0a0af16246e6acf3800934104dc7b0||cspanid=||spanid=684cec5d380704bb||proc_time=0||current_time=2022-04-01 19:49:00||rows=1||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 56
[INFO][2022-04-01T19:49:00.610][log.go:44] _com_request_out||response={\"errno\":0,\"errmsg\":\"\",\"data\":{\"total\":3,\"list\":[{\"id\":58,\"service_name\":\"test_grpc_service\",\"service_desc\":\"测试GRPC服务\",\"load_type\":2,\"service_addr\":\"10.10.10.198:8012\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":57,\"service_name\":\"test_tcp_service\",\"service_desc\":\"测试TCP代理\",\"load_type\":1,\"service_addr\":\"10.10.10.198:8011\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":56,\"service_name\":\"test_http_service\",\"service_desc\":\"测试HTTP代理\",\"load_type\":0,\"service_addr\":\"10.10.10.198:4433/test_http_service\",\"qps\":0,\"qpd\":0,\"total_node\":2}]},\"trace_id\":\"0a0a0af16246e6acf3800934104dc7b0\",\"stack\":null}||traceid=0a0a0af16246e6acf3800934104dc7b0||spanid=684cec5d380704bb||args=map[]||from=127.0.0.1||proc_time=0.014368089||cspanid=||uri=/service/service_list?page_size=20&page_no=1||method=GET
[INFO][2022-04-01T19:49:09.815][log.go:44] _com_request_in||uri=/service/service_add_http||method=POST||args=map[]||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"fdahjzg\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||from=127.0.0.1||traceid=0a0a0af16246e6b5de1009345a8581b0||cspanid=||spanid=684cec4457e9d186
[INFO][2022-04-01T19:49:09.815][log.go:44] _com_mysql_success||current_time=2022-04-01 19:49:09||cspanid=||spanid=684cec4457e9d186||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'fdahjzg'||rows=0||proc_time=1||traceid=0a0a0af16246e6b5de1009345a8581b0
[INFO][2022-04-01T19:49:09.815][log.go:44] _com_request_out||args=map[]||response={\"errno\":2002,\"errmsg\":\"服务已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e6b5de1009345a8581b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:214\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||cspanid=||spanid=684cec4457e9d186||uri=/service/service_add_http||method=POST||from=127.0.0.1||proc_time=0.00391698||traceid=0a0a0af16246e6b5de1009345a8581b0
[INFO][2022-04-01T19:49:30.381][log.go:44] _com_request_in||args=map[]||traceid=0a0a0af16246e6ca31d8094e658221b0||cspanid=||spanid=684cec3b78629a0f||method=POST||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"fdahjzg\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||from=127.0.0.1||uri=/service/service_add_http
[INFO][2022-04-01T19:49:30.381][log.go:44] _com_mysql_success||current_time=2022-04-01 19:49:30||cspanid=||spanid=684cec3b78629a0f||traceid=0a0a0af16246e6ca31d8094e658221b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:95||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'fdahjzg' ORDER BY `gateway_service_info`.`id` LIMIT 1||rows=0||proc_time=1
[INFO][2022-04-01T19:49:30.381][log.go:44] _com_mysql_success||traceid=0a0a0af16246e6ca31d8094e658221b0||rows=0||proc_time=1||current_time=2022-04-01 19:49:30||spanid=684cec3b78629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`rule_type` = 1 AND `gateway_service_http_rule`.`rule` = '/ada/d'||cspanid=
[INFO][2022-04-01T19:49:30.381][log.go:44] _com_request_out||from=127.0.0.1||response={\"errno\":2003,\"errmsg\":\"服务接入前缀或域名已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e6ca31d8094e658221b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:221\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||cspanid=||method=POST||args=map[]||proc_time=0.005690445||traceid=0a0a0af16246e6ca31d8094e658221b0||spanid=684cec3b78629a0f||uri=/service/service_add_http
[INFO][2022-04-01T19:52:53.855][log.go:44] _com_request_in||spanid=684ced6478629a0f||uri=/service/service_add_http||method=POST||args=map[]||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/ada/d\",\n  \"rule_type\": 1,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"zhjwbgz\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}||traceid=0a0a0af16246e795afa80974658221b0||from=127.0.0.1||cspanid=
[INFO][2022-04-01T19:52:53.855][log.go:44] _com_mysql_success||traceid=0a0a0af16246e795afa80974658221b0||cspanid=||spanid=684ced6478629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:94||proc_time=0||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'zhjwbgz' ORDER BY `gateway_service_info`.`id` LIMIT 1||rows=0||current_time=2022-04-01 19:52:53
[INFO][2022-04-01T19:52:53.855][log.go:44] _com_mysql_success||spanid=684ced6478629a0f||rows=0||cspanid=||current_time=2022-04-01 19:52:53||traceid=0a0a0af16246e795afa80974658221b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:30||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`rule_type` = 1 AND `gateway_service_http_rule`.`rule` = '/ada/d' ORDER BY `gateway_service_http_rule`.`id` LIMIT 1||proc_time=0
[INFO][2022-04-01T19:52:53.855][log.go:44] _com_request_out||method=POST||args=map[]||from=127.0.0.1||proc_time=0.004459535||uri=/service/service_add_http||response={\"errno\":0,\"errmsg\":\"\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e795afa80974658221b0\",\"stack\":null}||traceid=0a0a0af16246e795afa80974658221b0||cspanid=||spanid=684ced6478629a0f
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_request_in||args=map[]||body=||traceid=0a0a0af16246e9191250099b658221b0||cspanid=||spanid=684ce3e878629a0f||uri=/service/service_list?page_size=20&page_no=1||method=GET||from=127.0.0.1
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:81||cspanid=||sql=SELECT * FROM `gateway_service_info` WHERE is_delete=0 ORDER BY id desc LIMIT 20||rows=3||proc_time=0||current_time=2022-04-01 19:59:21||traceid=0a0a0af16246e9191250099b658221b0||spanid=684ce3e878629a0f
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||rows=1||traceid=0a0a0af16246e9191250099b658221b0||proc_time=0||current_time=2022-04-01 19:59:21||cspanid=||spanid=684ce3e878629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:86||sql=SELECT count(*) FROM `gateway_service_info` WHERE is_delete=0 LIMIT 20
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:32||proc_time=1||current_time=2022-04-01 19:59:21||cspanid=||spanid=684ce3e878629a0f||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 58 ORDER BY `gateway_service_http_rule`.`id` LIMIT 1||rows=0||traceid=0a0a0af16246e9191250099b658221b0
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||cspanid=||spanid=684ce3e878629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||proc_time=0||current_time=2022-04-01 19:59:21||traceid=0a0a0af16246e9191250099b658221b0||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 58||rows=0
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||rows=1||traceid=0a0a0af16246e9191250099b658221b0||cspanid=||spanid=684ce3e878629a0f||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 58||proc_time=0||current_time=2022-04-01 19:59:21
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 58||rows=1||proc_time=0||current_time=2022-04-01 19:59:21||cspanid=||traceid=0a0a0af16246e9191250099b658221b0||spanid=684ce3e878629a0f
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||proc_time=0||current_time=2022-04-01 19:59:21||cspanid=||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 58||rows=1||traceid=0a0a0af16246e9191250099b658221b0||spanid=684ce3e878629a0f
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:32||rows=0||proc_time=0||cspanid=||spanid=684ce3e878629a0f||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 57 ORDER BY `gateway_service_http_rule`.`id` LIMIT 1||current_time=2022-04-01 19:59:21||traceid=0a0a0af16246e9191250099b658221b0
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||spanid=684ce3e878629a0f||proc_time=0||current_time=2022-04-01 19:59:21||traceid=0a0a0af16246e9191250099b658221b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 57||rows=1
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||proc_time=0||traceid=0a0a0af16246e9191250099b658221b0||spanid=684ce3e878629a0f||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 57||rows=0||current_time=2022-04-01 19:59:21||cspanid=
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||current_time=2022-04-01 19:59:21||cspanid=||spanid=684ce3e878629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 57||rows=1||proc_time=0||traceid=0a0a0af16246e9191250099b658221b0
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||traceid=0a0a0af16246e9191250099b658221b0||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 57||rows=1||proc_time=0||current_time=2022-04-01 19:59:21||cspanid=||spanid=684ce3e878629a0f
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||rows=1||traceid=0a0a0af16246e9191250099b658221b0||spanid=684ce3e878629a0f||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`service_id` = 56 ORDER BY `gateway_service_http_rule`.`id` LIMIT 1||proc_time=0||current_time=2022-04-01 19:59:21||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:32
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||proc_time=0||traceid=0a0a0af16246e9191250099b658221b0||cspanid=||spanid=684ce3e878629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_tcp_rule.go:24||sql=SELECT * FROM `gateway_service_tcp_rule` WHERE `gateway_service_tcp_rule`.`service_id` = 56||rows=0||current_time=2022-04-01 19:59:21
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||rows=0||proc_time=0||traceid=0a0a0af16246e9191250099b658221b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_grpc_rule.go:25||sql=SELECT * FROM `gateway_service_grpc_rule` WHERE `gateway_service_grpc_rule`.`service_id` = 56||current_time=2022-04-01 19:59:21||spanid=684ce3e878629a0f
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_access_control.go:29||rows=1||proc_time=0||traceid=0a0a0af16246e9191250099b658221b0||spanid=684ce3e878629a0f||sql=SELECT * FROM `gateway_service_access_control` WHERE `gateway_service_access_control`.`service_id` = 56||current_time=2022-04-01 19:59:21||cspanid=
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_mysql_success||cspanid=||spanid=684ce3e878629a0f||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_load_balance.go:36||sql=SELECT * FROM `gateway_service_load_balance` WHERE `gateway_service_load_balance`.`service_id` = 56||rows=1||proc_time=0||current_time=2022-04-01 19:59:21||traceid=0a0a0af16246e9191250099b658221b0
[INFO][2022-04-01T19:59:21.032][log.go:44] _com_request_out||from=127.0.0.1||response={\"errno\":0,\"errmsg\":\"\",\"data\":{\"total\":3,\"list\":[{\"id\":58,\"service_name\":\"test_grpc_service\",\"service_desc\":\"测试GRPC服务\",\"load_type\":2,\"service_addr\":\"10.10.10.198:8012\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":57,\"service_name\":\"test_tcp_service\",\"service_desc\":\"测试TCP代理\",\"load_type\":1,\"service_addr\":\"10.10.10.198:8011\",\"qps\":0,\"qpd\":0,\"total_node\":1},{\"id\":56,\"service_name\":\"test_http_service\",\"service_desc\":\"测试HTTP代理\",\"load_type\":0,\"service_addr\":\"10.10.10.198:4433/test_http_service\",\"qps\":0,\"qpd\":0,\"total_node\":2}]},\"trace_id\":\"0a0a0af16246e9191250099b658221b0\",\"stack\":null}||spanid=684ce3e878629a0f||method=GET||args=map[]||traceid=0a0a0af16246e9191250099b658221b0||cspanid=||uri=/service/service_list?page_size=20&page_no=1||proc_time=0.016786208
[INFO][2022-04-01T19:59:43.182][log.go:44] _com_request_in||traceid=0a0a0af16246e92f2430099b104dc7b0||cspanid=||spanid=684ce3de380704bb||uri=/service/service_add_http||args=map[]||from=127.0.0.1||method=POST||body={\n  \"black_list\": \"\",\n  \"clientip_flow_limit\": 0,\n  \"header_transfor\": \"\",\n  \"ip_list\": \"123.45.234.32:235\",\n  \"need_https\": 1,\n  \"need_strip_uri\": 1,\n  \"need_websocket\": 1,\n  \"open_auth\": 1,\n  \"round_type\": 3,\n  \"rule\": \"/test_http_service\",\n  \"rule_type\": 0,\n  \"service_desc\": \"234\",\n  \"service_flow_limit\": 0,\n  \"service_name\": \"zhjwbgz\",\n  \"upstream_connect_timeout\": 0,\n  \"upstream_header_timeout\": 0,\n  \"upstream_idle_timeout\": 0,\n  \"upstream_max_idle\": 0,\n  \"url_rewrite\": \"\",\n  \"weight_list\": \"50\",\n  \"white_list\": \"\"\n}
[INFO][2022-04-01T19:59:43.182][log.go:44] _com_mysql_success||proc_time=1||cspanid=||sql=SELECT * FROM `gateway_service_info` WHERE `gateway_service_info`.`service_name` = 'zhjwbgz' ORDER BY `gateway_service_info`.`id` LIMIT 1||rows=0||current_time=2022-04-01 19:59:43||traceid=0a0a0af16246e92f2430099b104dc7b0||spanid=684ce3de380704bb||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_info.go:96
[INFO][2022-04-01T19:59:43.182][log.go:44] _com_mysql_success||traceid=0a0a0af16246e92f2430099b104dc7b0||cspanid=||FileWithLineNum=/Users/mac/go/src/github.com/go_gateway/dao/service_http_rule.go:32||proc_time=0||spanid=684ce3de380704bb||sql=SELECT * FROM `gateway_service_http_rule` WHERE `gateway_service_http_rule`.`rule` = '/test_http_service' ORDER BY `gateway_service_http_rule`.`id` LIMIT 1||rows=1||current_time=2022-04-01 19:59:43
[INFO][2022-04-01T19:59:43.182][log.go:44] _com_request_out||uri=/service/service_add_http||method=POST||response={\"errno\":2003,\"errmsg\":\"服务接入前缀或域名已存在\",\"data\":\"\",\"trace_id\":\"0a0a0af16246e92f2430099b104dc7b0\",\"stack\":\"github.com/zhj/go_gateway/controller.(*ServiceController).ServiceAddHTTP\\n\\t/Users/mac/go/src/github.com/go_gateway/controller/service.go:221\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.TranslationMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/translation.go:168\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.SessionAuthMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/session_auth.go:18\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RequestLog.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/request_log.go:59\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/zhj/go_gateway/middleware.RecoveryMiddleware.func1\\n\\t/Users/mac/go/src/github.com/go_gateway/middleware/recovery.go:33\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/contrib/sessions.Sessions.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/contrib@v0.0.0-20190526021735-7fb7810ed2a0/sessions/sessions.go:65\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/recovery.go:99\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/logger.go:241\\ngithub.com/gin-gonic/gin.(*Context).Next\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/context.go:168\\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:555\\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\\n\\t/Users/mac/go/pkg/mod/github.com/gin-gonic/gin@v1.7.7/gin.go:511\\nnet/http.serverHandler.ServeHTTP\\n\\t/usr/local/go/src/net/http/server.go:2843\\nnet/http.(*conn).serve\\n\\t/usr/local/go/src/net/http/server.go:1925\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1374\"}||proc_time=0.004384998||traceid=0a0a0af16246e92f2430099b104dc7b0||cspanid=||args=map[]||from=127.0.0.1||spanid=684ce3de380704bb
